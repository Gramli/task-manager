<div class="task-card" [attr.status]="task.status">
  <div
    class="task-top"
    style="
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    "
  >
    <h4 class="task-title">{{ task.title }}</h4>
    <span class="status-chip small">{{ task.status | titlecase }}</span>
  </div>

  <p class="task-desc" *ngIf="task.description">{{ task.description }}</p>

  <div
    class="task-footer"
    style="
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    "
  >
    <div class="task-timer small">
      <span class="time-counter">{{ formatTime(displayTime) }}</span>
      <span
        *ngIf="task.isTimerActive"
        style="margin-left: 8px; color: var(--accent)"
        >‚óè</span
      >
    </div>

    <div class="task-actions">
      <ng-container *ngIf="task.status === 'inProgress'">
        <button (click)="toggleTimer()" type="button" aria-label="Toggle timer">
          {{ task.isTimerActive ? "Stop" : "Start" }}
        </button>
      </ng-container>
      <ng-container *ngIf="task.status === 'done'">
        <button
          (click)="deleteTask()"
          type="button"
          aria-label="Delete task"
          style="
            background: #e3342f;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
          "
        >
          Delete
        </button>
      </ng-container>
      <ng-container *ngIf="showClearTimer">
        <button
          (click)="clearTimer()"
          type="button"
          aria-label="Clear Timer"
          style="
            background: #6d8505;
            color: #fff;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
          "
        >
          Clear Timer
        </button>
      </ng-container>
    </div>
  </div>
</div>
